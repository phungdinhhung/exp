<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Information Boarding House</title>
    <!-- <link rel='stylesheet' href='/stylesheets/style.css' /> -->
    <script type="text/javascript" src="http://code.jquery.com/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.number.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Convergence&family=Lato:wght@300;400;700;900&family=Mukta:wght@300;400;600;700;800&family=Noto+Sans:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="/stylesheets/upload.css">
    <link rel="stylesheet" href="/public/stylesheets/upload.scss">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>

<body>

    <%- include('./components/header')%>


    <section class="home" id="home">
        <form action="/room/upload/room" method="POST" enctype="multipart/form-data">
            <h3>Đăng tải thông tin nhà trọ</h3>
            <h2 style="margin-top: 10px"> Khu Vực </h2>
            <div class="inputBox">
                <select name="type" id="">
                    <option value="" disabled hidden selected>Kiểu phòng</option>
                    <option value="Căn hộ">Căn hộ</option>
                    <option value="Phòng trọ">Phòng trọ</option>
                </select>
                <select name="city" id="select-city">
                    <option value="" disabled hidden selected>Tỉnh/Thành Phố</option>
                    <option value="Thành phố Đà Nẵng">Đà Nẵng</option>
                </select>
                <select name="district" id="select-district">
                    <option value="" disabled hidden selected>Quận/Huyện</option>
                </select>
                <select name="ward" id="select-ward">
                    <option value="" disabled hidden selected>Phường/Xã</option>
                </select>
            </div>
            <div class="inputBox" style="padding-bottom: 10px">
                <input type="Địa Chỉ" name="address" placeholder="Số nhà, tên đường" id="">
            </div>
            <div style="margin-top: 20px">
                <h2>
                    Thông tin mô tả
                </h2>
                <div>
                    <div class="inputBox" style="padding-bottom: 10px">
                        <input type="Tiêu đề" name="" placeholder="Tiêu đề" id="">
                    </div>
                    <h6 style="margin-left: 5px">
                        Tiêu đề ngắn gọn, dễ hiểu, không dài quá 100 kí tự.
                    </h6>
                </div>
                <div>
                    <div class="inputBox" style="padding-bottom: 10px">
                        <label>Mô tả</label>
                        <textarea type="Nội dung mô tả" name="description" placeholder="Nội dung mô tả" id="" rows="10" cols="80" style="font-size:14px; border: 1px solid black; padding: 10px;"></textarea>
                    </div>
                    <h6 style="margin-left: 5px">
                        Nội dung mô tả phải có ít nhất 150 kí tự và không được dài quá 5000 kí tự.
                    </h6>
                </div>
                <div>
                    <h2 style="padding-top: 10px">
                        Giá cho thuê
                    </h2>
                    <div class="inputBox" style="padding-bottom: 10px">

                        <input type="text" name="price" placeholder="Nhập giá" id="price" value="">

                        <select class="form-select" aria-label="Default select example">
                        <option value="Đồng/Tháng">VND/Tháng</option>
                        <option value="Đồng/m2/Tháng">VND/m2/Tháng</option>
                    </select>
                    </div>
                </div>
                <div>
                    <h2 style="padding-top: 10px">
                        Diện tích
                    </h2>
                    <div class="inputBox" style="padding-bottom: 10px">
                        <input type="Nhập diện tích" name="acreage" placeholder="Nhập diện tích của căn nhà/phòng" id="">
                        <span class="input-group-text" id="basic-addon1">m2</span>
                    </div>
                </div>
                <div class="form-group">
                    <!-- <label for="file">Chọn ảnh</label>
                    <input type='file' id="getFile" name="file" multiple /> -->
                    <label for="formFileMultiple" class="form-label">Chọn ảnh phòng</label>
                    <input class="form-control" name="files" type="file" id="formFileMultiple" multiple />
                  </div>
            </div>
            <div class="buttons-container">

                <input type="button" value="Hủy bỏ" class="btn" style="font-size: 20px">
                <input type="submit" value="Đăng Tải" class="btn" style="font-size: 20px">
            </div>
        </form>

    </section>



    </section>

    <!-- contact section ends -->

    <!-- footer section starts  -->

    <footer>
        <div>Copyright @C2SE.14</div>
    </footer>

    <!-- footer section ends -->


    <!-- javascript part  -->
    <script>
        let menu = document.querySelector('#menu-bars');
        let navbar = document.querySelector('.navbar');

        menu.onclick = () => {
            navbar.classList.toggle('active');
            menu.classList.toggle('fa-times');
        }

        window.onscroll = () => {
            navbar.classList.remove('active');
            menu.classList.remove('fa-times');
        }
    </script>
    <script>
        const selectCity = document.getElementById("select-city");
        const selectDistrict = document.getElementById("select-district");
        const selectWard = document.getElementById("select-ward");
        let city, district, ward;
        let districts, wards;
        let optionsDistrict, optionsWard;
        let countDistrictClick = 0, countWardClick = 0;
        selectCity.addEventListener("click", () => {
            console.log('city nè: ', selectCity.value);
            city = selectCity.value;
            $.ajax({
                url: `https://provinces.open-api.vn/api/?depth=2`,
                type: "GET",
                success: function (response) {
                    console.log(response);
                }
            });
        })
        selectDistrict.addEventListener("click", () => {
            countWardClick = 0;
            selectWard.innerHTML = "";
            district = selectDistrict.value;
            countDistrictClick++;
            $.ajax({
                url: `https://provinces.open-api.vn/api/?depth=3`,
                type: "GET",
                success: function (response) {
                    for(let i = 0; i < response.length; i++) {
                        if(response[i].name === city) {
                            districts = response[i].districts;
                            for(let j = 0; j<districts.length; j++) {
                                optionsDistrict += `<option value="${districts[j].name}">${districts[j].name}</option>`;
                            }
                            if(countDistrictClick === 1) {
                                selectDistrict.innerHTML = optionsDistrict;
                            }
                        }
                    }
                }
            });
        })
        selectWard.addEventListener("click", () => {
            countWardClick++;
            $.ajax({
                url: `https://provinces.open-api.vn/api/?depth=3`,
                type: "GET",
                success: function (response) {
                    for(let i = 0; i < response.length; i++) {
                        if(response[i].name === city) {
                            for(let k = 0; k < response[i].districts.length; k++) {
                                if(response[i].districts[k].name === district) {
                                    for(let j = 0; j<response[i].districts[k].wards.length; j++) {
                                        optionsWard += `<option value=" ${response[i].districts[k].wards[j].name}">${response[i].districts[k].wards[j].name}</option>`;
                                    }
                                    if(countWardClick === 1) {
                                        selectWard.innerHTML = optionsWard;
                                    }

                                }
                            }
                        }
                    }
                }
            });
        })
    </script>
</body>

</html>